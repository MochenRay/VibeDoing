# 掌握卡片/03. 穿越：时光倒流.md

## 我的理解
Git 的“撤销”分为三个层级，对应不同的后悔程度：
1.  **还没 add（工作区）**：想放弃现在的胡涂乱抹，用 `git restore <file>`。注意：这会覆盖你的代码，找不回来！
2.  **已经 add（暂存区）**：想把东西从“购物车”里拿出来，但代码还要保留。用 `git restore --staged <file>`。这只是改变状态（绿变红），内容不丢。
3.  **已经 commit（版本库）**：
    -   **想重写提交信息或补漏**：用 `git reset --soft HEAD~1`。代码变回绿色暂存状态。
    -   **彻底毁灭这个版本**：用 `git reset --hard HEAD~1`。慎用！会抹除所有未存盘的修改。

## 🏀 类比挂钩
*导师与我的对话精华*
导师：如果你在“版本 A”里新增了 100 行代码，还没备份。哪个命令执行后，你的 100 行代码会瞬间人间蒸发？
我：处方 B（`git reset --hard`）代表蒸发，找不回来了。软删除（`--soft`）意味着还在数据库里，只是记录没了，东西还在。
导师：`git restore --staged` 就像是把文件从暂存区拖回了工作区。

## 踩过的坑
- **致命误区**：以为 `git reset --hard` 只影响 commit。
- **真相**：它会把**还没提交的、还没 add 的**所有工作进度全部抹平。如果你没做其他备份，这就是永久丢失。
- **操作失误**：运行 `restore` 或 `reset` 时忘记加文件名或版本坐标（如 `HEAD~1`），导致命令无效或范围失控。

## 源真理定义
> **git restore**：用于还原工作树文件。
> **git reset**：将当前 HEAD 重置为指定状态。`--soft` 不触动工作区和暂存区，`--hard` 强制重置三者。

## 关联
- 前置节点：[[02. 提交三部曲]]
- 后续节点：[[04. 分支：平行宇宙]]

## 💪 实操挑战
- [ ] 故意修改一个文件不 add，然后用 `git restore` 看看它是否真的变回去了。
- [ ] 做一个 commit 后，用 `git reset --soft HEAD~1` 撤销它，并观察 `git status` 的变化。
