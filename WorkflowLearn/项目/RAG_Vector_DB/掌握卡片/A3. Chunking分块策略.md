---
status: mastered
mastered_date: 2026-01-16
review_count: 0
last_review: 2026-01-16
next_review: 2026-01-19
---

# 掌握卡片：A3. Chunking分块策略

## 🧠 我的理解

> Chunking 是为 ANN "制造"搜索素材的过程。核心权衡：切太长会淹没关键信息、浪费上下文；切太短会丢失语义完整性。

> 策略选择要看场景：结构化用 Fixed-Length，FAQ 用 Sentence-Based，通用场景用 Recursive，话题跳跃用 Semantic，需要上下文完整性（如法律合同）用 Parent-Child。

## 🔗 类比挂钩

**"星际争霸地图分区"**
- 不会把整张地图作为一个区域侦察
- 分成"主矿区"、"三矿位"、"中路"等区块
- 发现敌人时能精确报点

**"Parent-Child = 小块找得准，大块答得全"**
- 小块负责精准命中用户问题
- 返回大块给 LLM，保证上下文完整

## ⚠️ 常见误区

- **误区**：Chunk 越小越精准
- **真相**：太小会丢失上下文，"它"指代谁都不知道

- **误区**：分块策略选好就够了
- **真相**：要和检索策略配合（如精确术语匹配需要混合搜索）

## 🚫 我的错误记录

- **场景**：法律合同场景，用户问"有没有关于'不可抗力'的条款"
- **错误**：选了 Semantic，以为"不可抗力"是话题跳跃
- **归因**：混淆了"语义匹配"和"精确关键词匹配"的区别
- **修正**：精确术语查找需要关键词搜索（BM25），不是向量语义匹配

## 💡 验证高光

- 准确分析法律合同场景选择 Parent-Child 的理由
- 理解"条款引用关系 → 需要上下文完整性"的推理链
- 认识到分块策略不是孤立的，要和检索策略配合

## 📖 源真理定义

> **Chunking** 是将长文档切分为适合 Embedding 和检索的小块的过程。主要策略包括：Fixed-Length（固定长度）、Sentence-Based（按句切分）、Recursive（递归切分）、Semantic（语义切分）、Parent-Child（父子块）。经验值：256-512 tokens，Overlap 50-100 tokens。

## 🧱 关联知识

- **前置节点**：[[A2. 相似度计算与ANN]]
- **后置节点**：[[B1. 向量数据库选型与实践]]
- **关键关联**：Chunking 是 ANN 的上游，决定搜索素材的粒度；Embedding 模型有输入长度限制，Chunk 太长会被截断

## 💪 实操挑战

下一节点 B1 将实际操作向量数据库，届时会用到本节点的分块知识。
