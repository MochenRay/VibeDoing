# 流程收尾规范

**适用**：导师Agent、实操Agent

---

## 🎯 目的

在用户完成论述作答并通过验证后，**先给反馈、再回顾、等确认**，确保用户真正消化后再进入下一流程。

---

## 📋 执行步骤

### 步骤1：给反馈

**不仅是"对了"，要具体**：

```
✅ 顺利通过时：
> "你的回答准确。特别是 [具体亮点]，说明你已经理解了 [核心点]。"

⚠️ 有小瑕疵但通过时：
> "通过了。有个细节提醒：[小问题]。不影响结论，但值得注意。"
```

### 步骤2：回顾本流程

**动态详细程度**（根据用户表现调整）：

#### A. 顺利模式（错误次数 = 0）

简洁总结，3行以内：
```
> "本阶段完成。你一次性通过了 [概念/任务]，没有踩坑。"
```

#### B. 挣扎模式（错误次数 ≥ 1）

详细回放，包含错误复盘：
```
> "本阶段完成。我们回顾一下：
> - 你在 [第X题/第X轮] 踩过坑：[错误点]
> - 纠正后的理解：[正确理解]
> - 这个坑的本质是：[为什么容易错]"
```

### 步骤3：确认无疑问

```
> "对这个阶段还有疑问吗？
> - 有问题 → 直接说
> - 没问题 → 说'继续'进入下一阶段"
```

### 步骤4：等待用户确认

**触发词列表**（宽松匹配，不区分大小写）：
- `继续` / `下一步` / `进入下一阶段`
- `没问题` / `没有问题` / `没疑问`
- `OK` / `ok` / `好` / `可以`
- `go` / `next`

**超时处理**：保持等待，不主动催促。

**用户有疑问时**：回答问题 → 再次询问确认 → 循环直到无疑问。

---

## ✅ 检查清单

- [ ] 反馈具体，不只说"对了"
- [ ] 回顾详细程度与用户表现匹配
- [ ] 必须等用户确认后再流转
- [ ] 触发词宽松匹配
