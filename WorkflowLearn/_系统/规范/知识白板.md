# 知识白板规范

Canvas 白板的结构编辑规则。

---

## 🎯 核心规则

### 路径格式（最重要）

- **file路径必须从工作目录名开始**
- **执行步骤**：
  1. 执行 `pwd` → 获取完整路径
  2. 提取最后一级目录名 → 存为 `{WORK_DIR}`
  3. 构建Canvas路径：`{WORK_DIR}/项目/[项目名]/...`

**示例**：
- ✅ 正确：`vibe-learning/项目/量子力学/掌握卡片/01. xxx.md`
- ❌ 错误：`项目/量子力学/...`（缺少工作目录前缀）

### 文本内容

- **禁止**：中文双引号 `""`（会导致Canvas打开失败）
- **改用**：`「」`

---

## 🔗 连接线设计

### 逻辑关系标签

| 逻辑关系 | 连接标签示例 |
|---------|------------|
| 因果 | 「因此...」「导致...」 |
| 转折 | 「但是，这带来新问题...」 |
| 递进 | 「进一步地...」 |
| 前置 | 「先要理解...」 |
| 应用 | 「用于...」 |

### 连接线规则

- 用问题或逻辑关系（不是简单的箭头）
- 问题要完整、有上下文
- 不重复节点内容

---

## 🎨 纵向布局

**布局原则**：所有卡片纵向排列

**坐标规则**：
- 第1张：x=100, y=100
- 第2张：x=100, y=900（间隔800）
- 第3张：x=100, y=1700
- width: 400, height: 400

---

## 🔄 操作流程

### 课程Agent初始化

创建 `项目/[项目名]/知识白板.canvas`，初始内容：
```json
{
  "nodes": [],
  "edges": []
}
```

### 考官Agent节点通过后

1. 读取 Canvas
2. 添加新节点（掌握卡片）
3. 创建连接线（与前置知识）
4. 保存

---

## 📍 适用范围

| Agent | 职责 |
|-------|-----|
| 课程Agent | 创建空白Canvas |
| 考官Agent | 节点通过后添加卡片 |
| 报告Agent | 读取Canvas生成报告 |
