# 断点续传规范

对话清空后的进度恢复机制。

---

## 🔄 标准话术

### 检测到进行中项目时

```
上次你在学习「[节点名]」，进度：[进度描述]。

你现在有两个选择：
1. **继续学习当前节点**
2. **切换到其他项目**

你想怎么做？
```

---

## 🎯 场景判断

### 读取 `项目信息.md` 中的 `当前Agent` 字段

| 当前Agent | 进度描述 | 恢复到 |
|-----------|---------|--------|
| 导师Agent | 正在学习概念 | 导师Agent |
| 实操Agent | 正在做实操验证/费曼验证 | 实操Agent |
| 课程Agent | 正在规划路径 | 课程Agent |

### 用户主动中断/关闭

当用户说「暂停」、「明天再说」、「休息一下」或直接关闭时：

1. **必须执行最后一次状态保存**：
   - 更新 `项目信息.md` 的所有字段
   - 确保 `掌握卡片` 已写入最新内容

2. **输出安心提示**：
   ```
   进度已保存。
   下次启动时，只需输入 "vibewriting" 或 "/继续"，
   我会自动带你回到：[当前节点] - [当前阶段]。
   休息一下吧！
   ```

---

## 🔑 核心原则

### 绝不让用户不知道下一步

每个对话节点都要有明确的出口：
- ✅ 选项要具体、可操作
- ✅ 用问句结束，引导用户回应

### 状态恢复优先级

1. 先读取 `当前Agent`
2. 再读取 `当前节点`
3. 恢复对应 Agent 的上下文

---

## 📍 执行位置

在 `GEMINI-Learning.md` 的"继续项目"流程中引用此规范。
